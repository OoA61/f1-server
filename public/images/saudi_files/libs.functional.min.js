fom.components.BrightCovePlayer=function(u,c,o,a,i,p,t){"use strict";var v={players:document.getElementsByClassName("video-js"),article:document.getElementsByClassName("f1-article"),inlineVideos:document.getElementsByClassName("f1-cc--video-inline"),overlayVideo:document.getElementsByClassName("f1-cc--video-overlay"),playlistVideos:document.getElementsByClassName("f1-cc--video-playlist"),isPlaylistPlayer:0<document.getElementsByClassName("f1-cc--video-playlist").length,isOverlayPlayer:0<document.getElementsByClassName("f1-cc--video-overlay").length,isSensitiveArticle:!1,videoPlaceHolder:document.getElementsByClassName("ooyala-player f1-cc--image"),freeWallStatus:i.freeWallStatus(),noFreewall:i.noFreewall(),freeWallContainer:document.getElementsByClassName("video-hub-freewall"),videoHubPlaceholder:document.getElementsByClassName("video-hub-placeholder"),articlefreeWallContainer:document.getElementsByClassName("articles"),articlefreeWallLiveBlogContainer:document.getElementsByClassName("articles-live-blog"),defaultVolumeLevel:.7,options:{iosPlayMode:"inline",horizontal:!0,nextButton:!1,showJumpControls:!1,loop:!1,controlBar:{picture_in_picture_control:!1,volumePanel:{inline:!0,vertical:!1}}},analytics:{freewallTrigger:{actionType:"CTAClick",event:"video_CTAClick",path:window.location.href,pathType:"Onpage",navigationElement:"video",locationInPage:"",isFreewallVisible:"",pageName:"",leadSource:"",overlayType:""}},handleAutoPlay:function(t){var e=t.el_.dataset.autoplay,a=!t.paused();"false"===e||a||void 0!==(e=t.play())&&e.then(function(){t.muted(!1),t.volume(v.defaultVolumeLevel)}).catch(function(e){t.muted(!0),t.play()})},setEvents:function(l){var e,n,r,s,d=this;c.videoPlayerStatus.createVideoArray(l),0<this.article.length&&(e=this.article[0].getAttribute("data-sensitive-article")||"",this.isSensitiveArticle="true"===e.toLowerCase()),!l.ima3||a.isAdvertisingEnabled()&&!this.isSensitiveArticle||(l.ima3.settings.serverUrl=""),l.on("adsready",function(){setTimeout(function(){!l.paused()&&l.ima3&&l.ima3.adsManager&&l.ima3.adsManager.destroy()},500)}),l.ready(function(){if(a.isFunctionalEnabled())for(var e=c.videoPlayerStatus.getVideoArray(),t=0;t<e.length;t++)if(e[t].id_){d.handleAutoPlay(e[t]);break}}),l.on("play",function(){var e=this,t=(v.isPlaylistPlayer&&(t=u(e.el_).offset(),u("html, body").stop().animate({scrollTop:t.top-100},500)),c.videoPlayerStatus.getVideoArray());if(c.videoPlayerStatus.pauseVideo(t,e),v.isPlaylistPlayer){var a=u(".related-videos a"),i="f1-video-now-playing";u(a).removeClass(i),u(a).parent().removeClass("playing-video");for(var o=0;o<a.length;o++){var n=a[o],r=u(n).data(),s=r.videoId;e.id_===s&&(u(n).addClass(i),u(n).parent().addClass("playing-video"),r.videoPublishedDate?u(".f1-video--content .published-date").text(r.videoPublishedDate).parent().removeClass("d-none"):u(".f1-video--content .published-date").text("").parent().addClass("d-none"),r.videoTitle&&u(".f1-video--content .video-title").text(r.videoTitle),r.isprotected||(u(".f1-video--content .unlock-tag").addClass("hidden"),u(".f1-video--content .unlock-tag").parent().removeClass("d-none")),(r.videoDescription?u(".f1-video--content .video-description").text(r.videoDescription):u(".f1-video--content .video-description").text("")).removeClass("d-none"),o===a.length-1?l.el_.classList.add("last-related-video"):l.el_.classList.remove("last-related-video"))}}}),v.isPlaylistPlayer&&(n=u(".related-videos a"),r=l.getAttribute("data-error-message"),n.removeClass("f1-video-now-playing"),n.parent().removeClass("playing-video"),s=d.getVideoDetails(),n.on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),u(".f1-video--content .unlock-tag").removeClass("hidden");var a,t,i,o,e=u(this);e.hasClass("f1-video-now-playing")||((t=e.data()).videoPublishedDate?u(".f1-video--content .published-date").text(t.videoPublishedDate).parent().removeClass("d-none"):u(".f1-video--content .published-date").text("").parent().addClass("d-none"),t.videoTitle&&u(".f1-video--content .video-title").text(t.videoTitle),t.isprotected||(u(".f1-video--content .unlock-tag").addClass("hidden"),u(".f1-video--content .unlock-tag").parent().removeClass("d-none")),(t.videoDescription?u(".f1-video--content .video-description").text(t.videoDescription):u(".f1-video--content .video-description").text("")).removeClass("d-none"),a=t.videoId,l.pause(),t=e.next().html(),u(".freewall-error").length&&u(".freewall-error").remove(),e=u(this).parent().index(),i=s[e].isProtected,v.analytics.freewallTrigger.event="video_CTAClick",d.freeWallStatus&&"true"==i?(o=l.offsetTop,u("html, body").animate({scrollTop:o-100},500),n.removeClass("f1-video-now-playing"),n.parent().removeClass("playing-video"),d.hidePlayer(l),o={id:a,index:e,loginState:d.freeWallStatus},sessionStorage.setItem("videoHubState",JSON.stringify(o)),u(d.freeWallContainer).show(),u(d.videoHubPlaceholder).html(t),p.update(),v.analytics.freewallTrigger.isFreewallVisible="true",v.pushTracking(v.analytics.freewallTrigger)):d.noFreewall&&"true"==i?(d.hidePlayer(l),n.removeClass("f1-video-now-playing"),n.parent().removeClass("playing-video"),u(l.el_).parent().after("<div class='freewall-error'><div class='inner-container'>"+r+"</div></div>"),u("html, body").animate({scrollTop:0},500),v.analytics.freewallTrigger.isFreewallVisible="false",v.pushTracking(v.analytics.freewallTrigger)):(u(d.freeWallContainer).hide(),l.el_.style.display="block",l.el_.querySelector("video").style.display="block",v.analytics.freewallTrigger.isFreewallVisible="false",v.pushTracking(v.analytics.freewallTrigger),l.catalog.getVideo(a,function(e,t){l.ads.isInAdMode()&&l.ima3.adsManager.destroy(),l.catalog.load(t),l.id_=a,l.setAttribute("id",a),l.el_.querySelector("video").setAttribute("data-video-id",a),l.play()})))}),l.on("ended",function(){var e=u(".related-videos .playing-video").next().find("a");0<e.length&&e.trigger("click")})),v.isOverlayPlayer&&d.overlayPlayer(l)},videoHubOnLoad:function(){var e=this;if(v.isPlaylistPlayer)for(var t=u(".related-videos a"),a=t.eq(0).data("video-id"),i=t.eq(0).parent().index(),o=e.getVideoDetails()[i].isProtected,n=(e.freeWallStatus&&"true"==o&&(i={id:a,index:i,loginState:e.freeWallStatus},sessionStorage.setItem("videoHubState",JSON.stringify(i))),JSON.parse(sessionStorage.getItem("videoHubState"))),r=0;r<e.players.length;r++){var s=e.players[r],l=s.getAttribute("data-error-message");if(null!=n){var d=n.loginState,c=(n.index,n.id);if(0==e.freeWallStatus&&1==d){if(e.noFreewall&&"true"==o)return t.removeClass("f1-video-now-playing"),t.parent().removeClass("playing-video"),u(s).parent().after("<div class='freewall-error'><div class='inner-container'>"+l+"</div></div>"),u("html, body").animate({scrollTop:0},500),void u(s).hide();u(e.freeWallContainer).hide(),u(s).show(),s.setAttribute("id",c)}else u(e.freeWallContainer).show(),s.setAttribute("id",""),u(s).hide()}else{if(e.noFreewall&&"true"==o)return t.removeClass("f1-video-now-playing"),t.parent().removeClass("playing-video"),u(s).parent().after("<div class='freewall-error'><div class='inner-container'>"+l+"</div></div>"),u("html, body").animate({scrollTop:0},500),void u(s).hide();u(e.freeWallContainer).hide(),s.setAttribute("id",a),u(s).show()}u("html, body").animate({scrollTop:0},500),v.analytics.freewallTrigger.locationInPage="videoHub"}},hidePlayer:function(e){e.setAttribute("id",""),e.el_.querySelector("video").setAttribute("data-video-id",""),e.el_.style.display="none"},showHideInlinePlayers:function(){var e=this,t=e.inlineVideos;if(v.inlineVideos)for(var a=0;a<t.length;a++){var i,o,n,r=t[a];e.articlefreeWallContainer.length?i=e.articlefreeWallContainer:e.articlefreeWallLiveBlogContainer.length&&(i=e.articlefreeWallLiveBlogContainer),0<e.article.length&&(n=u(e.article).data("isprotected"),e.freeWallStatus&&n?(u(t).remove(),u(e.videoPlaceHolder).show(),o=function(){var e=u(i).offset().top;u("html, body").stop().animate({scrollTop:e-100},1e3)},u(e.videoPlaceHolder).on("click",function(){u(i).show({done:o}),v.analytics.freewallTrigger.locationInPage="videoArticle",v.analytics.freewallTrigger.isFreewallVisible="true",v.pushTracking(v.analytics.freewallTrigger)})):(u(i).hide(),u(e.videoPlaceHolder).hide(),n=r.getAttribute("id")?r.getAttribute("id"):r.getAttribute("data-id"),r.setAttribute("data-video-id",n),r.setAttribute("id",n)))}},loadPlayer:function(){for(var e=o.getIDs(),t=0;t<this.players.length;t++){var a=this.players[t],i=a.getAttribute("id"),i=(a.setAttribute("data-account",e.accountID),a.setAttribute("data-player",e.playerID),i&&a.setAttribute("data-video-id",i),a.setAttribute("data-player-uid","bc-"+t),a=bc(a,this.options),this.setEvents(a),document.createElement("span"));i.classList.add("vjs-play-progress-scrubber"),a.el_.querySelector(".vjs-progress-control .vjs-play-progress").appendChild(i)}},overlayPlayer:function(i){u("[data-video-trigger='overlay-video']").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a,e=u(this);e.hasClass("f1-video-now-playing")||(a=e.data().videoId,u(".page-assembly-banner-video").show(),u(".page-assembly-video-overlay").show(),i.catalog.getVideo(a,function(e,t){i.ads.isInAdMode()&&i.ima3.adsManager.destroy(),i.catalog.load(t),i.id_=a,i.setAttribute("id",a),i.el_.querySelector("video").setAttribute("data-video-id",a),i.play()}))}),u(".page-assembly-banner-video .close-btn").on("click",function(){i.ads.isInAdMode()&&i.ima3.adsManager.destroy(),i.pause(),i.setAttribute("id",""),i.el_.querySelector("video").setAttribute("data-video-id",""),u(this).parent().hide(),u(".page-assembly-video-overlay").hide()})},getVideoDetails:function(){var e=u(".related-videos a"),a=[];return e.each(function(){var e=u(this).attr("data-video-id"),t=u(this).attr("data-isprotected");a.push({videoID:e,isProtected:t})}),a},init:function(){0!==this.players.length&&(o.loadScript(u.proxy(this.loadPlayer,this)),v.showHideInlinePlayers(),v.videoHubOnLoad())},setTrackingData:function(){var e=u(i.component).data("page-head-title"),t=u(i.component).data("hasImage");this.analytics.freewallTrigger.leadSource=i.getLeadSource(),this.analytics.freewallTrigger.pageName=e||"",this.analytics.freewallTrigger.overlayType=t?"Image":"No Image"},pushTracking:function(e){t.addProperty(e)}};u(document).ready(function(){v.init(),v.setTrackingData()})}(jQuery,fom.utils,fom.modules.BCscript,fom.modules.cmpScriptLoader,fom.components.freeWall,fom.lazyLoad,fom.tracking),function(e){"use strict";var t=[];e.videoPlayerStatus={createVideoArray:function(e){t.push(e)},getVideoArray:function(){return t},pauseVideo:function(e,t){$.each(e,function(){var e;this.pauseVideo&&(e=this.playerInfo.videoData.video_id,t.pauseVideo&&e===t.playerInfo.videoData.video_id||this.pauseVideo()),this.id_&&this.id_!==t.id_&&this.pause(),this.mb&&this.mb.MbId&&this.mb.MbId&&this.pause()})}}}(fom.utils),fom.components.socialShare=function(o,n,a){var t={selectors:{body:"body",modal:".fom-content-modal",modalContent:".fom-content-modal .fom-content",modalOverlay:".fom-modal-overlay",modalClose:".fom-content-modal a.icon-close",toggleSocialShare:".toggle-social-share",component:".social-share-wrapper",expand:".expand > a",shareLink:".site-nav .share",socialLink:".social-links-wrapper > li > a"},classes:{noscroll:"noscroll",hidden:"hidden"},data:{componentId:"component-id",articleId:"article-id",shareType:"share-type"},init:function(){this.bodyScrollPosition=o(n).scrollTop(),this.bindEvents(),this.loadTweetWidget()},bindEvents:function(){this.open(),this.close(),this.redirect(),o(this.selectors.toggleSocialShare).on("click",function(e){t.openSocialShareModal(e)})},openSocialShareModal:function(e){e.preventDefault();var e=this,t=o(e.selectors.component).not(".sidebar-top").first().clone(!0,!0);t.removeClass("d-none"),t.find(e.selectors.expand).triggerHandler("click"),o(e.selectors.modalContent).find(e.selectors.component).length||o(e.selectors.modalContent).append(t),o(e.selectors.modal).fadeIn(),o(e.selectors.modalOverlay).fadeIn(),a.controller.lockBodyScroll()},setDataLayer:function(e){var t=o(this.selectors.component).data(this.data.shareType),a=o(this.selectors.component).parents("*[data-component-type="+t+"]"),e={event:"socialInteraction",componentId:o(a).data("component-id"),socialNetwork:e.networkType,contentDetailShared:o("html").find('meta[property="og:title"]').attr("content"),contentTypeShare:o("html").find('meta[property="og:type"]').attr("content"),actionType:e.shareIntent?"shareIntent":"shareSuccess"};"article"===t?e.articleId=o(a).data("article-id"):"video"===t&&(e.videoId=o(a).data("video-id")),dataLayer.push(e)},open:function(){var t=this;o(t.selectors.shareLink).on("click",function(e){e.preventDefault(),0<o(t.selectors.component).length&&((e=o(t.selectors.component).not(".sidebar-top").first().clone(!0,!0)).find(t.selectors.expand).triggerHandler("click"),o(t.selectors.modalContent).find(t.selectors.component).length||o(t.selectors.modalContent).append(e),o(t.selectors.modal).fadeIn(),o(t.selectors.modalOverlay).fadeIn(),a.controller.lockBodyScroll())})},close:function(){var t=this;o(t.selectors.modalClose).on("click",function(e){e.preventDefault(),a.controller.unlockBodyScroll(),o(t.selectors.modal).fadeOut(),o(t.selectors.modalOverlay).fadeOut(function(){o(t.selectors.modalContent).empty()})})},extend:function(){var a=this;o(a.selectors.expand).on("click",function(e){e.preventDefault();var e=o(this),t=e.parent();(links=e.parents(a.selectors.component).find("li.hidden")).removeClass(a.classes.hidden),t.addClass(a.classes.hidden)})},setWindow:function(e){var t=o(n).width()/2-250,a=o(n).height()/2-200;n.open(e,"","width=500,height=400,top="+a+",left="+t)},loadTweetWidget:function(){var e,t,a,i;o(this.selectors.socialLink).length&&void 0===n.twttr&&(n.twttr=(e=document,t="twitter-wjs",a=e.getElementsByTagName("script")[0],i=n.twttr||{},e.getElementById(t)||((e=e.createElement("script")).id=t,e.src="https://platform.twitter.com/widgets.js",a.parentNode.insertBefore(e,a),i._e=[],i.ready=function(e){i._e.push(e)}),i))},redirect:function(){var i=this;o(i.selectors.socialLink).not(i.selectors.expand).on("click",function(e){e.preventDefault();var e=o(this),t=e.attr("href"),a=e.data("social-network");e.hasClass("icon-twitter")&&n.twttr.widgets||i.setWindow(t),i.setDataLayer({shareIntent:!0,networkType:a})})}};return t.init()}(jQuery,window,fom.components.navigation),fom.components.atom360||(fom.components.atom360={}),fom.components.atom360=function(a,t,i){"use strict";function e(){n(),a(window).scroll(n),a(o.selectors.btnLaunch360).on("click",r),a(o.selectors.btnClose).on("click",s)}var o={selectors:{body:"body",component:".border-animation",atom360:".atom-360--wrapper",atom360Overlay:".atom-360-overlay--wrapper",btnLaunch360:".btn--launch-360",btnClose:".btn--close-atom"},classes:{startAnimation:"start-animation",modalActive:"modal_active",hidden:"d-none"}},n=function(){a(o.selectors.component).each(function(){var e=a(this);t(e,!0)&&setTimeout(function(){e.addClass(o.classes.startAnimation)},500)})},r=function(e){var e=a(e.currentTarget).closest(o.selectors.atom360),t=e.attr("data-iframe-url");(e=e.next(o.selectors.atom360Overlay)).find("iframe").remove(),a('<iframe src="'+t+'" allow="vr; autoplay; fullscreen" src="#" frameborder="0" width="100%" style="flex:1"></iframe>').appendTo(e),e.removeClass(o.classes.hidden),e.length&&a(o.selectors.body).addClass(o.classes.modalActive),i.setTrackingData(a(this))},s=function(e){a(e.currentTarget).closest(o.selectors.atom360Overlay).addClass(o.classes.hidden),a(o.selectors.body).removeClass(o.classes.modalActive),i.setTrackingData(a(this))};0<a(o.selectors.component).length&&a(o.selectors.atom360).is(":visible")&&e()}(jQuery,fom.utils.isInViewPort,fom.tracking),fom.components.twitterEmbed=function(n,o){var e={selectors:{tweetFeed:".tweeter-feed",tweetFeedWrapper:".tweeter-feed-wrapper",twitterFallback:".twitter-fallback"},init:function(){var i=this;0<n(i.selectors.tweetFeed).length&&n.getScript("//platform.twitter.com/widgets.js",function(e,t,a){o.twttr.ready(function(e){i.initFeed()})})},initFeed:function(){var o=this;n(o.selectors.tweetFeed).each(function(e,t){var a=n(this)[0],i=n(this).data("feed-id").toString();twttr.widgets.createTweet(i,a,{theme:"default"}).then(function(e){void 0===e?n(a).find(o.selectors.twitterFallback).show():n(e).css({width:"100%"})})})}};return e.init()}(jQuery,window),fom.components.instagramEmbed=function(n,r,e){e={selectors:{instaFeed:".instagram-feed",instaFeedWrapper:".instagram-feed-wrapper",instaFallback:".instagram-fallback"},instagramAppId:e.getInstagramAppId(),instagramClientToken:e.getinstagramClientToken(),init:function(){var a=this,i=a.instagramAppId,o=a.instagramClientToken;0<n(a.selectors.instaFeed).length&&n(a.selectors.instaFeed).each(function(){var t=n(this),e="https://www.instagram.com/p/"+n(this).data("feed-id");new Promise(function(t,a){n.ajax({method:"GET",url:"https://graph.facebook.com/v8.0/instagram_oembed?url="+e+"&omitscript=true&access_token="+i+"|"+o,dataType:"JSON"}).done(function(e){t(e)}).fail(function(e){a(e)})}).then(function(e){void 0!==e&&e.html?t.parent(a.selectors.instaFeedWrapper).append(e.html):t.find(a.selectors.instaFallback).show(),r.instgrm&&instgrm.Embeds.process()}).catch(function(e){console.log("instaPostReqest error",e),t.find(a.selectors.instaFallback).show()})})}};return e.init()}(jQuery,window,fom.components.webService),fom.components.youtubePlayer=function(i,o,t){function n(e){e.each(function(){new YoutubePlayer(i(this),{}).initialize()})}a=0;var a,e=function(e){var t=++a+"";return e?e+t:t},r=i(o),s=((YoutubePlayer=function(e,t){this.element=e,this.params=t,this.done=!1}).prototype.initialize=function(){this.id=e("youtube-player-"),this.videoId=this.element.data("video-id"),this.element.find(".player").attr("id",this.id),this.createPlayer(this.id),this.subscribe()},YoutubePlayer.prototype.subscribe=function(){r.on("video-playing",i.proxy(function(e,t){this.id!==t.id&&this.player.pauseVideo()},this))},YoutubePlayer.prototype.createPlayer=function(e){this.player=new YT.Player(e,{videoId:this.videoId,playerVars:{autoplay:0,color:"red",enablejsapi:1,modestbranding:1,showinfo:0,rel:0,hl:"en-us"},events:{onReady:i.proxy(this.onPlayerReady,this),onStateChange:i.proxy(this.onPlayerStateChange,this),onError:i.proxy(this.onPlayerError,this)}}),this.gtmLastAction="p",t.videoPlayerStatus.createVideoArray(this.player)},YoutubePlayer.prototype.onPlayerReady=function(t){this.element.find(".play-video").on("click",i.proxy(function(e){e.preventDefault(),this.hidePreviewImage(),t.target.playVideo()},this))},YoutubePlayer.prototype.onPlayerStateChange=function(e){var t,a=e.target.getVideoUrl();e.data==YT.PlayerState.ENDED&&(this.element.hasClass("in-page")||(this.player.destroy(),this.showPreviewImage()),dataLayer.push({event:"youtube",eventCategory:a,eventAction:"Video Completed",eventLabel:""})),e.data==YT.PlayerState.PLAYING&&(e.target.a&&e.target.a.src,t=fom.utils.videoPlayerStatus.getVideoArray(),setTimeout(i.proxy(this.onPlayerPercent,this),1e3,e.target),fom.utils.videoPlayerStatus.pauseVideo(t,e.target)),e.data==YT.PlayerState.PLAYING&&"p"==this.gtmLastAction&&(dataLayer.push({event:"youtube",eventCategory:a,eventAction:"Video Played",eventLabel:""}),this.gtmLastAction="",r.trigger("video-playing",{id:this.id})),e.data==YT.PlayerState.PAUSED&&(dataLayer.push({event:"youtube",eventCategory:a,eventAction:"Video Paused",eventLabel:""}),this.gtmLastAction="p")},YoutubePlayer.prototype.onPlayerPercent=function(e){var t,a;e.getPlayerState()==YT.PlayerState.PLAYING&&(t=e.getDuration()-e.getCurrentTime()<=1.5?1:(Math.floor(e.getCurrentTime()/e.getDuration()*20)/20).toFixed(2),(!e.lastP||t>e.lastP)&&-1!=[.25,.5,.75,.9,1].indexOf(+t)&&(a=e.getVideoUrl(),e.lastP=t,label=100*t+"%",dataLayer.push({event:"youtube",eventCategory:a,eventAction:"Milestone",eventLabel:label})),1!=e.lastP&&setTimeout(i.proxy(this.onPlayerPercent,this),1e3,e))},YoutubePlayer.prototype.onPlayerError=function(e){dataLayer.push({event:"error",eventCategory:"Youtube Videos",eventAction:"GTM",eventLabel:"youtube:"+e.target.src+"-"+e.data})},YoutubePlayer.prototype.hidePreviewImage=function(){this.element.find(".play-icon").hide(),this.element.find("img").hide()},YoutubePlayer.prototype.showPreviewImage=function(){this.element.find(".play-icon").show(),this.element.find("img").show()},i(".youtube-player"));return s.length&&function(e){var t,a;"undefined"==typeof YT?(o.onYouTubePlayerAPIReady=i.proxy(function(){n(e)},this),(t=document.createElement("script")).src="https://www.youtube.com/iframe_api",(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,a)):n(e)}(s),YoutubePlayer}(jQuery,window,fom.utils);